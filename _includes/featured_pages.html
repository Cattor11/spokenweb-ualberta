<!-- Featured Exhibits Carousel -->
<div id='wax-gallery-objects-container' class='wax-gallery-container full-width'>
    <div class='wax-inline-container'>
        <div class="carousel-new">
            <div class="carousel__nav">
                <span id="moveLeft" class="carousel__arrow">
                    <svg class="carousel__icon" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path>
                    </svg>
                </span>
                <span id="moveRight" class="carousel__arrow" >
                    <svg class="carousel__icon"  width="24" height="24" viewBox="0 0 24 24">
                        <path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"></path>
                    </svg>
                </span>
            </div>
            {% for page in site.pages %}
            {% if page.layout == "exhibit" %}
            <div class="carousel-item">
                <div class="carousel-item__image" style="background-image: url({{ page.featured_image }})"></div>
                <div class="carousel-item__info">
                    <div class="carousel-item__container">
                        <h2 class="carousel-item__subtitle">{{ page.subtitle }}</h2>
                        <h1 class="carousel-item__title">{{ page.title }}</h1>
                        <p class="carousel-item__description">{{ page.description }}</p>
                        <a href="exhibits/voiceprint/" class="carousel-item__btn">Visit Exhibit</a>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<script>
$(function(){
  $('.carousel-item').eq(0).addClass('active');
  var total = $('.carousel-item').length;
  var current = 0;
  $('#moveRight').on('click', function(){
    var next=current;
    current= current+1;
    setSlide(next, current);
  });
  $('#moveLeft').on('click', function(){
    var prev=current;
    current = current- 1;
    setSlide(prev, current);
  });
  function setSlide(prev, next){
    var slide= current;
    if(next>total-1){
     slide=0;
      current=0;
    }
    if(next<0){
      slide=total - 1;
      current=total - 1;
    }
           $('.carousel-item').eq(prev).removeClass('active');
           $('.carousel-item').eq(slide).addClass('active');
      setTimeout(function(){

      },800);
    

    
    console.log('current '+current);
    console.log('prev '+prev);
  }
});
</script>



<!-- Original Carousel

<script>
  function move_carousel_page(amount) {
    const chunk = 224;
    let offset = 0;
    let items = document.querySelectorAll(".sp-page-item");
    const size = items.length;

    let container = document.getElementById("wax-gallery-pages");
    let num_visible = Math.floor(container.offsetWidth / chunk);
    let max_offset = ((size - num_visible) * chunk) - offset;

    if (num_visible >= items.length) {
      Array.from(document.getElementsByClassName("sp-carousel-control")).forEach(x => x.style.visibility = "hidden");
    }

    items.forEach(x => {
      let current = parseInt(x.style.translate);
      let new_amount = current + (amount * chunk);

      // Check for right overflow
      if (new_amount < -max_offset) {
        new_amount = -max_offset;
      }

      // Check for left overflow
      if (new_amount > offset) {
        new_amount = offset;
      }

      x.style.translate = new_amount.toString() + "px"
    });
  }
  document.addEventListener("DOMContentLoaded", () => move_carousel_page(0));
</script>

<div id='wax-gallery-objects-container' class='wax-gallery-container full-width'>
  <div class='wax-inline-container'>
    <div id="wax-gallery-pages" class="wax-gallery">
      <button class="sp-carousel-right-control sp-carousel-control" onClick="move_carousel_page(-1)">&gt;</button>
      <button class="sp-carousel-left-control sp-carousel-control" onClick="move_carousel_page(1)">&lt;</button>
      {% for item_id in page.featured_pages %}
        {% for new_page in site.pages %}
          {% if new_page.title == item_id %}
            {% assign thumbnail = new_page.featured_image | default: 'img/digtape.jpg' | relative_url %}
            <div class='gallery-item sp-page-item all' style="translate: 0;">
              <a href='{{ new_page.url | relative_url }}'>
                <div class='hovereffect'>
                  <img class='img-responsive gallery-thumb' src='{{ thumbnail }}'/>
                  <div class='overlay'>
                    {{ new_page.title }}
                  </div>
                </div>
              </a>
            </div>
            {% break %}
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
  </div>
</div>

-->